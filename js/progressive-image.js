window.addEventListener&&window.requestAnimationFrame&&document.getElementsByClassName&&window.addEventListener("load",function(){"use strict";var r,e,s=document.getElementsByClassName("progressive replace");window.addEventListener("scroll",t,!1),window.addEventListener("resize",t,!1),MutationObserver&&new MutationObserver(function(){s.length!==r&&n()}).observe(document.body,{subtree:!0,childList:!0,attributes:!0,characterData:!0});function t(){e=e||setTimeout(function(){e=null,n()},300)}function n(){s.length&&requestAnimationFrame(function(){for(var e,t,n=window.innerHeight,i=0;i<s.length;)0<(t=(e=s[i].getBoundingClientRect()).top)+e.height&&t<n?(a(s[i]),s[i].classList.remove("replace")):i++;r=s.length})}function a(t,e){var n=t&&(t.getAttribute("data-href")||t.href);if(n){var i=new Image,r=t.dataset;r&&(r.srcset&&(i.srcset=r.srcset),r.sizes&&(i.sizes=r.sizes)),i.onload=function(){requestAnimationFrame(function(){n===t.href&&(t.style.cursor="default",t.addEventListener("click",function(e){e.preventDefault()},!1));var e=t.querySelector&&t.querySelector("img.preview");t.insertBefore(i,e&&e.nextSibling).addEventListener("animationend",function(){e&&(e.alt&&(i.alt=e.alt),t.removeChild(e)),i.classList.remove("reveal")})})},(e=1+(e||0))<3&&(i.onerror=function(){setTimeout(function(){a(t,e)},3e3*e)}),i.className="reveal",i.src=n}}n()},!1);